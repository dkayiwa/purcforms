package org.purc.purcforms.client.controller;

import java.util.ArrayList;
import java.util.List;
import java.util.HashMap;

import org.purc.purcforms.client.PurcConstants;
import org.purc.purcforms.client.locale.LocaleText;
import org.purc.purcforms.client.model.FormDef;
import org.purc.purcforms.client.util.FormUtil;
import org.purc.purcforms.client.widget.FormRunnerWidget;
import org.purc.purcforms.client.widget.RuntimeWidgetWrapper;
import org.purc.purcforms.client.xforms.XformParser;

import com.google.gwt.http.client.Request;
import com.google.gwt.http.client.RequestBuilder;
import com.google.gwt.http.client.RequestCallback;
import com.google.gwt.http.client.RequestException;
import com.google.gwt.http.client.Response;
import com.google.gwt.http.client.URL;
import com.google.gwt.user.client.Command;
import com.google.gwt.user.client.DeferredCommand;
import com.google.gwt.user.client.Window;


/**
 * Controls the interactions between the views for the form runner
 * and also handles server side communication on behalf of this view.
 * 
 * @author daniel
 *
 */
public class FormRunnerController implements SubmitListener{

	private FormRunnerWidget formRunner;
	private String xformXml;
	private String layoutXml;
	private String javaScriptSrc;
	private String xml;
	private int formId;
	private int entityId;

	public FormRunnerController(FormRunnerWidget formRunner){
		this.formRunner = formRunner;
	}
	public void loadForm(int frmId, int entyId){
		loadForm(frmId, entyId, "");
	}
	public void loadForm(int frmId, int entyId, String importedXml){
		this.formId = frmId;
		this.entityId = entyId;

		if(!importedXml.equals("")) {
			xml = importedXml;
		} else {
			xml = "<PurcForm><Xform><h:html xmlns:h=\"http://www.w3.org/1999/xhtml\" xmlns:jr=\"http://openrosa.org/javarosa\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><h:head><h:title ref=\"jr:itext('blok_20100_-_nieuw_-_wonen_-_n_unit_gebruik')\">Blok 20100 - Nieuw -  Wonen - één unit gebruik</h:title><model><instance id=\"N_WONEN_EEN_001\"><N_WONEN_EEN_001 name=\"Blok 20100 - Nieuw -  Wonen - één unit gebruik\" id=\"N_WONEN_EEN_001\" ref=\"jr:itext('blok_20100_-_nieuw_-_wonen_-_n_unit_gebruik')\"><NuttigeOppervlakte eenheid=\"m²\" /><SlaapkamerAantal /><VerwarmingType /><IsZorgwoning /><ZorgwoningOppervlakte eenheid=\"m²\" /><IsVrijBeroep /><DeelVrijBeroepOppervlakte eenheid=\"m²\" /><DeelGemeenschappelijkOppervlakte eenheid=\"m²\" /><IsKamerVerhuur /><KamerVerhuurAantal /></N_WONEN_EEN_001></instance><bind id=\"NuttigeOppervlakte\" nodeset=\"/N_WONEN_EEN_001/NuttigeOppervlakte\" type=\"xsd:decimal\" required=\"true()\" /><bind id=\"NuttigeOppervlakte@eenheid\" nodeset=\"/N_WONEN_EEN_001/NuttigeOppervlakte@eenheid\" type=\"xsd:string\" required=\"true()\" locked=\"true()\" visible=\"false()\" /><bind id=\"SlaapkamerAantal\" nodeset=\"/N_WONEN_EEN_001/SlaapkamerAantal\" type=\"xsd:int\" required=\"true()\" /><bind id=\"VerwarmingType\" nodeset=\"/N_WONEN_EEN_001/VerwarmingType\" type=\"xsd:string\" required=\"true()\" /><bind id=\"IsZorgwoning\" nodeset=\"/N_WONEN_EEN_001/IsZorgwoning\" type=\"xsd:string\" required=\"true()\" /><bind id=\"ZorgwoningOppervlakte\" nodeset=\"/N_WONEN_EEN_001/ZorgwoningOppervlakte\" type=\"xsd:decimal\" readonly=\"true()\" relevant=\"/N_WONEN_EEN_001/IsZorgwoning = 'J'\" action=\"enable\" required=\"true()\" /><bind id=\"ZorgwoningOppervlakte@eenheid\" nodeset=\"/N_WONEN_EEN_001/ZorgwoningOppervlakte@eenheid\" type=\"xsd:string\" required=\"true()\" locked=\"true()\" visible=\"false()\" /><bind id=\"IsVrijBeroep\" nodeset=\"/N_WONEN_EEN_001/IsVrijBeroep\" type=\"xsd:string\" required=\"true()\" /><bind id=\"DeelVrijBeroepOppervlakte\" nodeset=\"/N_WONEN_EEN_001/DeelVrijBeroepOppervlakte\" type=\"xsd:decimal\" readonly=\"true()\" relevant=\"/N_WONEN_EEN_001/IsVrijBeroep = 'DEELS'\" action=\"enable\" required=\"true()\" /><bind id=\"DeelVrijBeroepOppervlakte@eenheid\" nodeset=\"/N_WONEN_EEN_001/DeelVrijBeroepOppervlakte@eenheid\" type=\"xsd:string\" required=\"true()\" locked=\"true()\" visible=\"false()\" /><bind id=\"DeelGemeenschappelijkOppervlakte\" nodeset=\"/N_WONEN_EEN_001/DeelGemeenschappelijkOppervlakte\" type=\"xsd:decimal\" relevant=\"/N_WONEN_EEN_001/IsVrijBeroep = 'DEELS'\" action=\"enable\" required=\"true()\" /><bind id=\"DeelGemeenschappelijkOppervlakte@eenheid\" nodeset=\"/N_WONEN_EEN_001/DeelGemeenschappelijkOppervlakte@eenheid\" type=\"xsd:string\" required=\"true()\" locked=\"true()\" visible=\"false()\" /><bind id=\"IsKamerVerhuur\" nodeset=\"/N_WONEN_EEN_001/IsKamerVerhuur\" type=\"xsd:string\" required=\"true()\" /><bind id=\"KamerVerhuurAantal\" nodeset=\"/N_WONEN_EEN_001/KamerVerhuurAantal\" type=\"xsd:int\" readonly=\"true()\" relevant=\"/N_WONEN_EEN_001/IsKamerVerhuur = 'J'\" action=\"enable\" required=\"true()\" /><itext><translation lang=\"nl\" lang-name=\"Nederlands\"><text id=\"blok_20100_-_nieuw_-_wonen_-_n_unit_gebruik\"><value>Blok 20100 - Nieuw -  Wonen - één unit gebruik</value></text><text id=\"page1\"><value>Page1</value></text><text id=\"NuttigeOppervlakte_label\"><value>B_NuttigeOppervlakte</value></text><text id=\"NuttigeOppervlakte@eenheid_label\"><value>A_NuttigeOppervlakte_eenheid</value></text><text id=\"SlaapkamerAantal_label\"><value>B_SlaapkamerAantal</value></text><text id=\"VerwarmingType_label\"><value>B_VerwarmingType</value></text><text id=\"VerwarmingType_hint\"><value>B_VerwarmingType</value></text><text id=\"VerwarmingType.AARDGAS_label\"><value>Aardgas</value></text><text id=\"VerwarmingType.STOOKOLIE_label\"><value>Stookolie</value></text><text id=\"VerwarmingType.ELEKTRICITEIT_label\"><value>Elektriciteit</value></text><text id=\"VerwarmingType.ZON_label\"><value>Zonne-energie</value></text><text id=\"VerwarmingType.STEENKOOL_label\"><value>Steenkool</value></text><text id=\"VerwarmingType.HOUT_label\"><value>Hout</value></text><text id=\"VerwarmingType.BUTAAN_PROPAANGAS_label\"><value>Butaan- of propaangas</value></text><text id=\"VerwarmingType.WARMTEPOMP_label\"><value>Warmtepompen</value></text><text id=\"VerwarmingType.ANDER_label\"><value>Andere</value></text><text id=\"IsZorgwoning_label\"><value>Q_IsZorgwoning</value></text><text id=\"IsZorgwoning.J_label\"><value>Ja</value></text><text id=\"IsZorgwoning.N_label\"><value>Neen</value></text><text id=\"ZorgwoningOppervlakte_label\"><value>B_ZorgwoningOppervlakte</value></text><text id=\"ZorgwoningOppervlakte@eenheid_label\"><value>A_ZorgwoningOppervlakte_eenheid</value></text><text id=\"IsVrijBeroep_label\"><value>Q_IsVrijBeroep</value></text><text id=\"IsVrijBeroep.NEE_label\"><value>Nee</value></text><text id=\"IsVrijBeroep.VOLLEDIG_label\"><value>Ja, volledig</value></text><text id=\"IsVrijBeroep.DEELS_label\"><value>Ja, gedeeltelijk</value></text><text id=\"DeelVrijBeroepOppervlakte_label\"><value>B_DeelVrijBeroepOppervlakte</value></text><text id=\"DeelVrijBeroepOppervlakte@eenheid_label\"><value>A_DeelVrijBeroepOppervlakte_eenheid</value></text><text id=\"DeelGemeenschappelijkOppervlakte_label\"><value>B_DeelGemeenschappelijkOppervlakte</value></text><text id=\"DeelGemeenschappelijkOppervlakte@eenheid_label\"><value>A_DeelGemeenschappelijkOppervlakte_eenheid</value></text><text id=\"IsKamerVerhuur_label\"><value>Q_IsKamerVerhuur</value></text><text id=\"IsKamerVerhuur.J_label\"><value>Ja</value></text><text id=\"IsKamerVerhuur.N_label\"><value>Nee</value></text><text id=\"KamerVerhuurAantal_label\"><value>B_KamerVerhuurAantal</value></text></translation><translation lang=\"fr\" lang-name=\"French\" /></itext></model></h:head><h:body><group id=\"1\"><label ref=\"jr:itext('page1')\">Page1</label><input bind=\"NuttigeOppervlakte\"><label ref=\"jr:itext('NuttigeOppervlakte_label')\">B_NuttigeOppervlakte</label></input><input bind=\"NuttigeOppervlakte@eenheid\"><label ref=\"jr:itext('NuttigeOppervlakte@eenheid_label')\">A_NuttigeOppervlakte_eenheid</label></input><input bind=\"SlaapkamerAantal\"><label ref=\"jr:itext('SlaapkamerAantal_label')\">B_SlaapkamerAantal</label></input><select1 bind=\"VerwarmingType\"><label ref=\"jr:itext('VerwarmingType_label')\">B_VerwarmingType</label><hint ref=\"jr:itext('VerwarmingType_hint')\">B_VerwarmingType</hint><item id=\"AARDGAS\"><label ref=\"jr:itext('VerwarmingType.AARDGAS_label')\">Aardgas</label><value>AARDGAS</value></item><item id=\"STOOKOLIE\"><label ref=\"jr:itext('VerwarmingType.STOOKOLIE_label')\">Stookolie</label><value>STOOKOLIE</value></item><item id=\"ELEKTRICITEIT\"><label ref=\"jr:itext('VerwarmingType.ELEKTRICITEIT_label')\">Elektriciteit</label><value>ELEKTRICITEIT</value></item><item id=\"ZON\"><label ref=\"jr:itext('VerwarmingType.ZON_label')\">Zonne-energie</label><value>ZON</value></item><item id=\"STEENKOOL\"><label ref=\"jr:itext('VerwarmingType.STEENKOOL_label')\">Steenkool</label><value>STEENKOOL</value></item><item id=\"HOUT\"><label ref=\"jr:itext('VerwarmingType.HOUT_label')\">Hout</label><value>HOUT</value></item><item id=\"BUTAAN_PROPAANGAS\"><label ref=\"jr:itext('VerwarmingType.BUTAAN_PROPAANGAS_label')\">Butaan- of propaangas</label><value>BUTAAN_PROPAANGAS</value></item><item id=\"WARMTEPOMP\"><label ref=\"jr:itext('VerwarmingType.WARMTEPOMP_label')\">Warmtepompen</label><value>WARMTEPOMP</value></item><item id=\"ANDER\"><label ref=\"jr:itext('VerwarmingType.ANDER_label')\">Andere</label><value>ANDER</value></item></select1><select1 bind=\"IsZorgwoning\"><label ref=\"jr:itext('IsZorgwoning_label')\">Q_IsZorgwoning</label><item id=\"J\"><label ref=\"jr:itext('IsZorgwoning.J_label')\">Ja</label><value>J</value></item><item id=\"N\"><label ref=\"jr:itext('IsZorgwoning.N_label')\">Neen</label><value>N</value></item></select1><input bind=\"ZorgwoningOppervlakte\"><label ref=\"jr:itext('ZorgwoningOppervlakte_label')\">B_ZorgwoningOppervlakte</label></input><input bind=\"ZorgwoningOppervlakte@eenheid\"><label ref=\"jr:itext('ZorgwoningOppervlakte@eenheid_label')\">A_ZorgwoningOppervlakte_eenheid</label></input><select1 bind=\"IsVrijBeroep\"><label ref=\"jr:itext('IsVrijBeroep_label')\">Q_IsVrijBeroep</label><item id=\"NEE\"><label ref=\"jr:itext('IsVrijBeroep.NEE_label')\">Nee</label><value>NEE</value></item><item id=\"VOLLEDIG\"><label ref=\"jr:itext('IsVrijBeroep.VOLLEDIG_label')\">Ja, volledig</label><value>VOLLEDIG</value></item><item id=\"DEELS\"><label ref=\"jr:itext('IsVrijBeroep.DEELS_label')\">Ja, gedeeltelijk</label><value>DEELS</value></item></select1><input bind=\"DeelVrijBeroepOppervlakte\"><label ref=\"jr:itext('DeelVrijBeroepOppervlakte_label')\">B_DeelVrijBeroepOppervlakte</label></input><input bind=\"DeelVrijBeroepOppervlakte@eenheid\"><label ref=\"jr:itext('DeelVrijBeroepOppervlakte@eenheid_label')\">A_DeelVrijBeroepOppervlakte_eenheid</label></input><input bind=\"DeelGemeenschappelijkOppervlakte\"><label ref=\"jr:itext('DeelGemeenschappelijkOppervlakte_label')\">B_DeelGemeenschappelijkOppervlakte</label></input><input bind=\"DeelGemeenschappelijkOppervlakte@eenheid\"><label ref=\"jr:itext('DeelGemeenschappelijkOppervlakte@eenheid_label')\">A_DeelGemeenschappelijkOppervlakte_eenheid</label></input><select1 bind=\"IsKamerVerhuur\"><label ref=\"jr:itext('IsKamerVerhuur_label')\">Q_IsKamerVerhuur</label><item id=\"J\"><label ref=\"jr:itext('IsKamerVerhuur.J_label')\">Ja</label><value>J</value></item><item id=\"N\"><label ref=\"jr:itext('IsKamerVerhuur.N_label')\">Nee</label><value>N</value></item></select1><input bind=\"KamerVerhuurAantal\"><label ref=\"jr:itext('KamerVerhuurAantal_label')\">B_KamerVerhuurAantal</label></input></group></h:body></h:html></Xform> PURCFORMS_FORMDEF_LAYOUT_XML_SEPARATOR<Layout><Form id=\"1\"><Page Text=\"Page1\" fontWeight=\"normal\" fontSize=\"13px\" fontFamily=\"Verdana, 'Lucida Grande', 'Trebuchet MS', Arial, Sans-Serif\" Binding=\"Page1\" Width=\"1200px\" Height=\"400px\" backgroundColor=\"\"><Item WidgetType=\"Button\" Text=\"Submit\" HelpText=\"submit\" Binding=\"submit\" Left=\"800px\" Top=\"-85px\" Width=\"70px\" Height=\"30px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Button\" Text=\"Cancel\" HelpText=\"cancel\" Binding=\"cancel\" Left=\"900px\" Top=\"-85px\" Width=\"70px\" Height=\"30px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"De woning omvat slechts één wooneenheid. Appartementen en studio's zijn aparte woongelegenheden. Ruimtes voor een vrij beroep zijn geen aparte wooneenheden.\" HelpText=\"Label\" Binding=\"LEFT23pxTOP66px\" Left=\"240px\" Top=\"0px\" Width=\"600px\" Height=\"5px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"titleInfo\" /><Item WidgetType=\"Label\" Text=\"NIEUWE TOESTAND:\" HelpText=\"Label\" Binding=\"LEFT30pxTOP30px\" Left=\"30px\" Top=\"30px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"questionGroup\" /><Item WidgetType=\"Label\" Text=\"A_ZOE\" HelpText=\"A_ZorgwoningOppervlakte_eenheid\" Binding=\"ZorgwoningOppervlakte@eenheid\" Left=\"716px\" Top=\"180px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"A_NOE\" HelpText=\"A_NuttigeOppervlakte_eenheid\" Binding=\"NuttigeOppervlakte@eenheid\" Left=\"652px\" Top=\"61px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Gemeenschappelijke delen niet meegerekend\" HelpText=\"Label\" Binding=\"LEFT101pxTOP200px\" Left=\"100px\" Top=\"196px\" Width=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"titleInfo\" /><Item WidgetType=\"TextBox\" HelpText=\"A_ZorgwoningOppervlakte_eenheid\" Binding=\"ZorgwoningOppervlakte@eenheid\" Left=\"669px\" Top=\"181px\" Width=\"30px\" Height=\"18px\" TabIndex=\"7\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"A_DeelVrijBeroepOppervlakte_eenheid\" Binding=\"DeelVrijBeroepOppervlakte@eenheid\" Left=\"625px\" Top=\"256px\" Width=\"20px\" Height=\"18px\" TabIndex=\"10\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"A_DeelGemeenschappelijkOppervlakte_eenheid\" Binding=\"DeelGemeenschappelijkOppervlakte@eenheid\" Left=\"626px\" Top=\"286px\" Width=\"20px\" Height=\"18px\" TabIndex=\"12\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Aantal slaapkamers\" HelpText=\"B_SlaapkamerAantal\" Binding=\"SlaapkamerAantal\" Left=\"30px\" Top=\"91px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Wordt de woning gebruikt voor de uitoefening van een vrij beroep?\" HelpText=\"Q_IsVrijBeroep\" Binding=\"IsVrijBeroep\" Left=\"30px\" Top=\"226px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"questionGroup\" /><Item WidgetType=\"Label\" Text=\"Oppervlakte voor het vrij beroep\" HelpText=\"B_DeelVrijBeroepOppervlakte\" Binding=\"DeelVrijBeroepOppervlakte\" Left=\"60px\" Top=\"256px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Oppervlakte van de gemeenschappelijke delen\" HelpText=\"B_DeelGemeenschappelijkOppervlakte\" Binding=\"DeelGemeenschappelijkOppervlakte\" Left=\"60px\" Top=\"286px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Bevat de woning kamers voor apart verhuur?\" HelpText=\"Q_IsKamerVerhuur\" Binding=\"IsKamerVerhuur\" Left=\"30px\" Top=\"326px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"questionGroup\" /><Item WidgetType=\"Label\" Text=\"Aantal kamers die verhuurd worden\" HelpText=\"B_KamerVerhuurAantal\" Binding=\"KamerVerhuurAantal\" Left=\"60px\" Top=\"356px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"m²\" HelpText=\"B_NuttigeOppervlakte\" Binding=\"NuttigeOppervlakte\" Left=\"550px\" Top=\"61px\" Width=\"3px\" Height=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"m²\" HelpText=\"B_DeelVrijBeroepOppervlakte\" Binding=\"DeelVrijBeroepOppervlakte\" Left=\"550px\" Top=\"181px\" Width=\"13px\" Height=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"m²\" HelpText=\"B_DeelVrijBeroepOppervlakte\" Binding=\"DeelVrijBeroepOppervlakte\" Left=\"550px\" Top=\"256px\" Width=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"m²\" HelpText=\"B_DeelGemeenschappelijkOppervlakte\" Binding=\"DeelGemeenschappelijkOppervlakte\" Left=\"550px\" Top=\"286px\" Height=\"1px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_SlaapkamerAantal\" Binding=\"SlaapkamerAantal\" Left=\"430px\" Top=\"91px\" Width=\"100px\" Height=\"18px\" TabIndex=\"3\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"ListBox\" HelpText=\"Q_IsZorgwoning\" Binding=\"IsZorgwoning\" Left=\"430px\" Top=\"151px\" Width=\"100px\" Height=\"25px\" TabIndex=\"5\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_ZorgwoningOppervlakte\" Binding=\"ZorgwoningOppervlakte\" Left=\"430px\" Top=\"181px\" Width=\"100px\" Height=\"18px\" TabIndex=\"6\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_DeelVrijBeroepOppervlakte\" Binding=\"DeelVrijBeroepOppervlakte\" Left=\"430px\" Top=\"256px\" Width=\"100px\" Height=\"18px\" TabIndex=\"9\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_DeelGemeenschappelijkOppervlakte\" Binding=\"DeelGemeenschappelijkOppervlakte\" Left=\"430px\" Top=\"286px\" Width=\"100px\" Height=\"18px\" TabIndex=\"11\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"ListBox\" HelpText=\"Q_IsKamerVerhuur\" Binding=\"IsKamerVerhuur\" Left=\"430px\" Top=\"326px\" Width=\"100px\" Height=\"25px\" TabIndex=\"13\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_KamerVerhuurAantal\" Binding=\"KamerVerhuurAantal\" Left=\"430px\" Top=\"356px\" Width=\"100px\" Height=\"18px\" TabIndex=\"14\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"B_NuttigeOppervlakte\" Binding=\"NuttigeOppervlakte\" Left=\"430px\" Top=\"61px\" Width=\"100px\" Height=\"18px\" TabIndex=\"1\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"TextBox\" HelpText=\"A_NuttigeOppervlakte_eenheid\" Binding=\"NuttigeOppervlakte@eenheid\" Left=\"591px\" Top=\"61px\" Width=\"46px\" Height=\"18px\" TabIndex=\"2\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"De woning zal verwarmd worden met:\" HelpText=\"B_VerwarmingType\" Binding=\"VerwarmingType\" Left=\"29px\" Top=\"121px\" Height=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Oppervlakte van de ondergeschikte wooneenheid\" HelpText=\"B_ZorgwoningOppervlakte\" Binding=\"ZorgwoningOppervlakte\" Left=\"60px\" Top=\"181px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"ListBox\" HelpText=\"B_VerwarmingType\" Binding=\"VerwarmingType\" Left=\"430px\" Top=\"121px\" Width=\"200px\" Height=\"25px\" TabIndex=\"4\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"ListBox\" HelpText=\"Q_IsVrijBeroep\" Binding=\"IsVrijBeroep\" Left=\"535px\" Top=\"226px\" Width=\"150px\" Height=\"25px\" TabIndex=\"8\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Nuttige vloeroppervlakte\" HelpText=\"B_NuttigeOppervlakte\" Binding=\"NuttigeOppervlakte\" Left=\"30px\" Top=\"61px\" Width=\"px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" /><Item WidgetType=\"Label\" Text=\"Is de definitie 'zorgwoning' van toepassing ?\" HelpText=\"Q_IsZorgwoning\" Binding=\"IsZorgwoning\" Left=\"30px\" Top=\"151px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"questionGroup\" /><Item WidgetType=\"Label\" Text=\"WONEN - eengezinswoning\" HelpText=\"Label\" Binding=\"LEFT21pxTOP20px\" Left=\"0px\" Top=\"0px\" TabIndex=\"0\" fontSize=\"13px\" fontFamily=\"Verdana,'Lucida Grande','Trebuchet MS',Arial,Sans-Serif\" ExternalSource=\"h2\" /></Page></Form></Layout><Language><LanguageText lang=\"nl\"><xform id=\"1\"><text xpath=\"html/head/model/instance[@id='N_WONEN_EEN_001']/N_WONEN_EEN_001[@name]\" value=\"Blok 20100 - Nieuw -  Wonen - één unit gebruik\" /><text xpath=\"html/head/title\" value=\"Blok 20100 - Nieuw -  Wonen - één unit gebruik\" /><text xpath=\"html/body/group[@id='1']/label\" value=\"Page1\" /><text xpath=\"html/body/group[@id='1']/input[@bind='NuttigeOppervlakte']/label\" value=\"B_NuttigeOppervlakte\" /><text xpath=\"html/body/group[@id='1']/input[@bind='NuttigeOppervlakte@eenheid']/label\" value=\"A_NuttigeOppervlakte_eenheid\" /><text xpath=\"html/body/group[@id='1']/input[@bind='SlaapkamerAantal']/label\" value=\"B_SlaapkamerAantal\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/label\" value=\"B_VerwarmingType\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/hint\" value=\"B_VerwarmingType\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='AARDGAS']/label\" value=\"Aardgas\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='STOOKOLIE']/label\" value=\"Stookolie\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ELEKTRICITEIT']/label\" value=\"Elektriciteit\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ZON']/label\" value=\"Zonne-energie\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='STEENKOOL']/label\" value=\"Steenkool\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='HOUT']/label\" value=\"Hout\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='BUTAAN_PROPAANGAS']/label\" value=\"Butaan- of propaangas\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='WARMTEPOMP']/label\" value=\"Warmtepompen\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ANDER']/label\" value=\"Andere\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsZorgwoning']/label\" value=\"Q_IsZorgwoning\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsZorgwoning']/item[@id='J']/label\" value=\"Ja\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsZorgwoning']/item[@id='N']/label\" value=\"Neen\" /><text xpath=\"html/body/group[@id='1']/input[@bind='ZorgwoningOppervlakte']/label\" value=\"B_ZorgwoningOppervlakte\" /><text xpath=\"html/body/group[@id='1']/input[@bind='ZorgwoningOppervlakte@eenheid']/label\" value=\"A_ZorgwoningOppervlakte_eenheid\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/label\" value=\"Q_IsVrijBeroep\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='NEE']/label\" value=\"Nee\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='VOLLEDIG']/label\" value=\"Ja, volledig\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='DEELS']/label\" value=\"Ja, gedeeltelijk\" /><text xpath=\"html/body/group[@id='1']/input[@bind='DeelVrijBeroepOppervlakte']/label\" value=\"B_DeelVrijBeroepOppervlakte\" /><text xpath=\"html/body/group[@id='1']/input[@bind='DeelVrijBeroepOppervlakte@eenheid']/label\" value=\"A_DeelVrijBeroepOppervlakte_eenheid\" /><text xpath=\"html/body/group[@id='1']/input[@bind='DeelGemeenschappelijkOppervlakte']/label\" value=\"B_DeelGemeenschappelijkOppervlakte\" /><text xpath=\"html/body/group[@id='1']/input[@bind='DeelGemeenschappelijkOppervlakte@eenheid']/label\" value=\"A_DeelGemeenschappelijkOppervlakte_eenheid\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/label\" value=\"Q_IsKamerVerhuur\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/item[@id='J']/label\" value=\"Ja\" /><text xpath=\"html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/item[@id='N']/label\" value=\"Nee\" /><text xpath=\"html/body/group[@id='1']/input[@bind='KamerVerhuurAantal']/label\" value=\"B_KamerVerhuurAantal\" /></xform><Form id=\"1\"><text xpath=\"Form/Page[@Binding='Page1'][@Text]\" value=\"Page1\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='submit' and @WidgetType='Button'][@Text]\" value=\"Submit\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='submit' and @WidgetType='Button'][@HelpText]\" value=\"submit\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='submit' and @WidgetType='Button'][@Top]\" value=\"-85px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='submit' and @WidgetType='Button'][@Left]\" value=\"800px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='submit' and @WidgetType='Button'][@Width]\" value=\"70px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='cancel' and @WidgetType='Button'][@Text]\" value=\"Cancel\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='cancel' and @WidgetType='Button'][@HelpText]\" value=\"cancel\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='cancel' and @WidgetType='Button'][@Top]\" value=\"-85px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='cancel' and @WidgetType='Button'][@Left]\" value=\"900px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='cancel' and @WidgetType='Button'][@Width]\" value=\"70px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT23pxTOP66px' and @WidgetType='Label'][@Text]\" value=\"De woning omvat slechts één wooneenheid. Appartementen en studio's zijn aparte woongelegenheden. Ruimtes voor een vrij beroep zijn geen aparte wooneenheden.\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT23pxTOP66px' and @WidgetType='Label'][@HelpText]\" value=\"Label\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT23pxTOP66px' and @WidgetType='Label'][@Top]\" value=\"0px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT23pxTOP66px' and @WidgetType='Label'][@Left]\" value=\"240px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT23pxTOP66px' and @WidgetType='Label'][@Width]\" value=\"600px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT30pxTOP30px' and @WidgetType='Label'][@Text]\" value=\"NIEUWE TOESTAND:\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT30pxTOP30px' and @WidgetType='Label'][@HelpText]\" value=\"Label\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT30pxTOP30px' and @WidgetType='Label'][@Top]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT30pxTOP30px' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='Label'][@Text]\" value=\"A_ZOE\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='Label'][@HelpText]\" value=\"A_ZorgwoningOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='Label'][@Top]\" value=\"180px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='Label'][@Left]\" value=\"716px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='Label'][@Text]\" value=\"A_NOE\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='Label'][@HelpText]\" value=\"A_NuttigeOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='Label'][@Top]\" value=\"61px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='Label'][@Left]\" value=\"652px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT101pxTOP200px' and @WidgetType='Label'][@Text]\" value=\"Gemeenschappelijke delen niet meegerekend\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT101pxTOP200px' and @WidgetType='Label'][@HelpText]\" value=\"Label\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT101pxTOP200px' and @WidgetType='Label'][@Top]\" value=\"196px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT101pxTOP200px' and @WidgetType='Label'][@Left]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT101pxTOP200px' and @WidgetType='Label'][@Width]\" value=\"px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='TextBox'][@HelpText]\" value=\"A_ZorgwoningOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='TextBox'][@Top]\" value=\"181px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='TextBox'][@Left]\" value=\"669px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte@eenheid' and @WidgetType='TextBox'][@Width]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte@eenheid' and @WidgetType='TextBox'][@HelpText]\" value=\"A_DeelVrijBeroepOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte@eenheid' and @WidgetType='TextBox'][@Top]\" value=\"256px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte@eenheid' and @WidgetType='TextBox'][@Left]\" value=\"625px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte@eenheid' and @WidgetType='TextBox'][@Width]\" value=\"20px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte@eenheid' and @WidgetType='TextBox'][@HelpText]\" value=\"A_DeelGemeenschappelijkOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte@eenheid' and @WidgetType='TextBox'][@Top]\" value=\"286px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte@eenheid' and @WidgetType='TextBox'][@Left]\" value=\"626px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte@eenheid' and @WidgetType='TextBox'][@Width]\" value=\"20px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='Label'][@Text]\" value=\"Aantal slaapkamers\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='Label'][@HelpText]\" value=\"B_SlaapkamerAantal\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='Label'][@Top]\" value=\"91px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='Label'][@Text]\" value=\"Wordt de woning gebruikt voor de uitoefening van een vrij beroep?\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='Label'][@HelpText]\" value=\"Q_IsVrijBeroep\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='Label'][@Top]\" value=\"226px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Text]\" value=\"Oppervlakte voor het vrij beroep\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_DeelVrijBeroepOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Top]\" value=\"256px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Left]\" value=\"60px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Text]\" value=\"Oppervlakte van de gemeenschappelijke delen\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_DeelGemeenschappelijkOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Top]\" value=\"286px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Left]\" value=\"60px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='Label'][@Text]\" value=\"Bevat de woning kamers voor apart verhuur?\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='Label'][@HelpText]\" value=\"Q_IsKamerVerhuur\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='Label'][@Top]\" value=\"326px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='Label'][@Text]\" value=\"Aantal kamers die verhuurd worden\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='Label'][@HelpText]\" value=\"B_KamerVerhuurAantal\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='Label'][@Top]\" value=\"356px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='Label'][@Left]\" value=\"60px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Text]\" value=\"m²\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_NuttigeOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Top]\" value=\"61px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Left]\" value=\"550px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Width]\" value=\"3px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Text]\" value=\"m²\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_DeelVrijBeroepOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Top]\" value=\"181px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Left]\" value=\"550px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Width]\" value=\"13px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Text]\" value=\"m²\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_DeelVrijBeroepOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Top]\" value=\"256px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Left]\" value=\"550px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='Label'][@Width]\" value=\"px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Text]\" value=\"m²\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_DeelGemeenschappelijkOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Top]\" value=\"286px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='Label'][@Left]\" value=\"550px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='TextBox'][@HelpText]\" value=\"B_SlaapkamerAantal\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='TextBox'][@Top]\" value=\"91px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='SlaapkamerAantal' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='ListBox'][@HelpText]\" value=\"Q_IsZorgwoning\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='ListBox'][@Top]\" value=\"151px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='ListBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='ListBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='TextBox'][@HelpText]\" value=\"B_ZorgwoningOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='TextBox'][@Top]\" value=\"181px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='TextBox'][@HelpText]\" value=\"B_DeelVrijBeroepOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='TextBox'][@Top]\" value=\"256px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelVrijBeroepOppervlakte' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='TextBox'][@HelpText]\" value=\"B_DeelGemeenschappelijkOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='TextBox'][@Top]\" value=\"286px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='DeelGemeenschappelijkOppervlakte' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='ListBox'][@HelpText]\" value=\"Q_IsKamerVerhuur\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='ListBox'][@Top]\" value=\"326px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='ListBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsKamerVerhuur' and @WidgetType='ListBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='TextBox'][@HelpText]\" value=\"B_KamerVerhuurAantal\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='TextBox'][@Top]\" value=\"356px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='KamerVerhuurAantal' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='TextBox'][@HelpText]\" value=\"B_NuttigeOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='TextBox'][@Top]\" value=\"61px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='TextBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='TextBox'][@Width]\" value=\"100px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='TextBox'][@HelpText]\" value=\"A_NuttigeOppervlakte_eenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='TextBox'][@Top]\" value=\"61px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='TextBox'][@Left]\" value=\"591px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte@eenheid' and @WidgetType='TextBox'][@Width]\" value=\"46px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='Label'][@Text]\" value=\"De woning zal verwarmd worden met:\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='Label'][@HelpText]\" value=\"B_VerwarmingType\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='Label'][@Top]\" value=\"121px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='Label'][@Left]\" value=\"29px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='Label'][@Text]\" value=\"Oppervlakte van de ondergeschikte wooneenheid\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_ZorgwoningOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='Label'][@Top]\" value=\"181px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='ZorgwoningOppervlakte' and @WidgetType='Label'][@Left]\" value=\"60px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='ListBox'][@HelpText]\" value=\"B_VerwarmingType\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='ListBox'][@Top]\" value=\"121px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='ListBox'][@Left]\" value=\"430px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='VerwarmingType' and @WidgetType='ListBox'][@Width]\" value=\"200px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='ListBox'][@HelpText]\" value=\"Q_IsVrijBeroep\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='ListBox'][@Top]\" value=\"226px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='ListBox'][@Left]\" value=\"535px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsVrijBeroep' and @WidgetType='ListBox'][@Width]\" value=\"150px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Text]\" value=\"Nuttige vloeroppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@HelpText]\" value=\"B_NuttigeOppervlakte\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Top]\" value=\"61px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='NuttigeOppervlakte' and @WidgetType='Label'][@Width]\" value=\"px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='Label'][@Text]\" value=\"Is de definitie 'zorgwoning' van toepassing ?\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='Label'][@HelpText]\" value=\"Q_IsZorgwoning\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='Label'][@Top]\" value=\"151px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='IsZorgwoning' and @WidgetType='Label'][@Left]\" value=\"30px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT21pxTOP20px' and @WidgetType='Label'][@Text]\" value=\"WONEN - eengezinswoning\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT21pxTOP20px' and @WidgetType='Label'][@HelpText]\" value=\"Label\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT21pxTOP20px' and @WidgetType='Label'][@Top]\" value=\"0px\" /><text xpath=\"Form/Page[@Binding='Page1']/Item[@Binding='LEFT21pxTOP20px' and @WidgetType='Label'][@Left]\" value=\"0px\" /></Form></LanguageText><LanguageText lang=\"fr\"><xform><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='NuttigeOppervlakte']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='NuttigeOppervlakte@eenheid']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='SlaapkamerAantal']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='AARDGAS']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='STOOKOLIE']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ELEKTRICITEIT']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ZON']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='STEENKOOL']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='HOUT']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='BUTAAN_PROPAANGAS']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='WARMTEPOMP']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/item[@id='ANDER']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsZorgwoning']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsZorgwoning']/item[@id='J']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsZorgwoning']/item[@id='N']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='ZorgwoningOppervlakte']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='ZorgwoningOppervlakte@eenheid']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='NEE']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='VOLLEDIG']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsVrijBeroep']/item[@id='DEELS']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='DeelVrijBeroepOppervlakte']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='DeelVrijBeroepOppervlakte@eenheid']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='DeelGemeenschappelijkOppervlakte']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='DeelGemeenschappelijkOppervlakte@eenheid']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/item[@id='J']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='IsKamerVerhuur']/item[@id='N']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/input[@bind='KamerVerhuurAantal']/label\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/body/group[@id='1']/select1[@bind='VerwarmingType']/hint\" value=\"undefined\" /><text xpath=\"PurcForm/Xform/html/head/title\" value=\"undefined\" /></xform></LanguageText></Language></PurcForm>";
		}

		FormUtil.dlg.setText(LocaleText.get("openingForm"));
		FormUtil.dlg.center();

		DeferredCommand.addCommand(new Command(){
			public void execute() {
				if(xml == null || xml.length() == 0){
					FormUtil.dlg.hide();
					Window.alert(LocaleText.get("noDataFound"));
					return;
				}

				xformXml = null; layoutXml = null; javaScriptSrc = null;

				openForm();
			}	
		});
	}
	

	public void openForm() {
		FormUtil.dlg.setText(LocaleText.get("openingForm"));
		FormUtil.dlg.center();

		DeferredCommand.addCommand(new Command(){
			public void execute() {
				try{
					FormDef formDef = XformParser.fromXform2FormDefCipal(xml);
					xformXml = formDef.getXformXml();
					layoutXml = formDef.getLayoutXml();

					List<RuntimeWidgetWrapper> externalSourceWidgets = new ArrayList<RuntimeWidgetWrapper>();

					formRunner.loadForm(formDef, layoutXml,javaScriptSrc,externalSourceWidgets);

					FormUtil.dlg.hide();	
				}
				catch(Exception ex){
					FormUtil.displayException(ex);
				}
			}
		});
	}

	public void onCancel(){
		String url = FormUtil.getHostPageBaseURL();
		url += FormUtil.getAfterSubmitUrlSuffix();

		if(FormUtil.appendEntityIdAfterSubmit()){
			url += FormUtil.getEntityIdName();
			url += "=" + entityId;
		}

		Window.Location.replace(url);
	}

	public void onSubmit(String xml){

		FormUtil.dlg.setText(LocaleText.get("submitting"));
		FormUtil.dlg.center();

		final String submitXml = xml;

		DeferredCommand.addCommand(new Command(){
			public void execute() {
				//"http://127.0.0.1:8080/openmrs/module/xforms/xformDataUpload.form"
				String url = FormUtil.getHostPageBaseURL();
				url += FormUtil.getFormDataUploadUrlSuffix();

				RequestBuilder builder = new RequestBuilder(RequestBuilder.POST,URL.encode(url));

				try{
					builder.sendRequest(submitXml, new RequestCallback(){
						public void onResponseReceived(Request request, Response response){
							FormUtil.dlg.hide();
							
							if(response.getStatusCode() != Response.SC_OK){
								FormUtil.displayReponseError(response);
								return;
							}

							if(response.getStatusCode() == Response.SC_OK){
								if(FormUtil.showSubmitSuccessMsg())
									Window.alert(LocaleText.get("formSubmitSuccess"));

								String url = FormUtil.getHostPageBaseURL();
								url += FormUtil.getAfterSubmitUrlSuffix();

								if(FormUtil.appendEntityIdAfterSubmit()){
									url += FormUtil.getEntityIdName();
									if(entityId > 0)
										url += "=" + entityId;
									else if(entityId == 0 && response.getText().trim().length() > 0)
										url += "=" + response.getText();
								}

								Window.Location.replace(url); //"http://127.0.0.1:8080/openmrs/patientDashboard.form?patientId=13"
							}
							else
								FormUtil.displayReponseError(response);
						}

						public void onError(Request request, Throwable exception){
							FormUtil.displayException(exception);
						}
					});
				}
				catch(RequestException ex){
					FormUtil.displayException(ex);
				}
			}
		});
	}
	@Override
	public void onSubmit(String xml, boolean valid) {
		// TODO Auto-generated method stub
		
	}
	@Override
	public void onSubmitFailed(String reason) {
		// TODO Auto-generated method stub
		
	}
}
